<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">

<title>module Hen::DSL - hen Application documentation (v0.5.0)</title>

<link type="text/css" media="screen" href="../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
</script>

<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/darkfish.js"></script>


<body id="top" class="module">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="../index.html">Home</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  

  <div id="file-metadata">
    <nav id="file-list-section" class="section">
  <h3 class="section-header">Defined In</h3>
  <ul>
    <li>lib/hen/dsl.rb
  </ul>
</nav>

    
  </div>

  <div id="class-metadata">
    
    
    
    <!-- Extension Modules -->
<nav id="extends-section" class="section">
  <h3 class="section-header">Extended With Modules</h3>

  <ul class="link-list">
    
  
    <li><span class="extend">Rake::DSL</span>
  
  
  </ul>
</nav>

    <!-- Method Quickref -->
<nav id="method-list-section" class="section">
  <h3 class="section-header">Methods</h3>

  <ul class="link-list">
    
    <li ><a href="#method-i-call_block">#call_block</a>
    
    <li ><a href="#method-i-config">#config</a>
    
    <li ><a href="#method-i-execute">#execute</a>
    
    <li ><a href="#method-i-extend_object">#extend_object</a>
    
    <li ><a href="#method-i-gemcutter">#gemcutter</a>
    
    <li ><a href="#method-i-git">#git</a>
    
    <li ><a href="#method-i-have_git-3F">#have_git?</a>
    
    <li ><a href="#method-i-have_rubyforge-3F">#have_rubyforge?</a>
    
    <li ><a href="#method-i-have_rubygems-3F">#have_rubygems?</a>
    
    <li ><a href="#method-i-have_svn-3F">#have_svn?</a>
    
    <li ><a href="#method-i-have_task-3F">#have_task?</a>
    
    <li ><a href="#method-i-init_git">#init_git</a>
    
    <li ><a href="#method-i-init_rubyforge">#init_rubyforge</a>
    
    <li ><a href="#method-i-init_rubygems">#init_rubygems</a>
    
    <li ><a href="#method-i-init_svn">#init_svn</a>
    
    <li ><a href="#method-i-mangle_files-21">#mangle_files!</a>
    
    <li ><a href="#method-i-map_options">#map_options</a>
    
    <li ><a href="#method-i-missing_lib">#missing_lib</a>
    
    <li ><a href="#method-i-project_name">#project_name</a>
    
    <li ><a href="#method-i-pseudo_object">#pseudo_object</a>
    
    <li ><a href="#method-i-rubyforge">#rubyforge</a>
    
    <li ><a href="#method-i-rubygems">#rubygems</a>
    
    <li ><a href="#method-i-set_options">#set_options</a>
    
    <li ><a href="#method-i-skipping">#skipping</a>
    
    <li ><a href="#method-i-svn">#svn</a>
    
    <li ><a href="#method-i-task-21">#task!</a>
    
  </ul>
</nav>

  </div>

  <div id="project-metadata">
    <nav id="fileindex-section" class="section project-section">
  <h3 class="section-header">Pages</h3>

  <ul>
  
    <li class="file"><a href="../COPYING.html">COPYING</a>
  
    <li class="file"><a href="../ChangeLog.html">ChangeLog</a>
  
    <li class="file"><a href="../README.html">README</a>
  
  </ul>
</nav>

    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="../Hen.html">Hen</a>
  
    <li><a href="../Hen/CLI.html">Hen::CLI</a>
  
    <li><a href="../Hen/Commands.html">Hen::Commands</a>
  
    <li><a href="../Hen/DSL.html">Hen::DSL</a>
  
    <li><a href="../Hen/File.html">Hen::File</a>
  
    <li><a href="../Hen/Version.html">Hen::Version</a>
  
    <li><a href="../Object.html">Object</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation">
  <h1 class="module">module Hen::DSL</h1>

  <div id="description" class="description">
    
<p>Some helper methods for use inside of a <a href="../Hen.html">Hen</a>
definition.</p>

  </div><!-- description -->

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    <!-- Methods -->
    
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="method-i-config" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">config</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>The <a href="../Hen.html">Hen</a> configuration.</p>
          
          

          
          <div class="method-source-code" id="config-source">
            <pre><span class="ruby-comment"># File lib/hen/dsl.rb, line 46</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">config</span>
  <span class="ruby-identifier">extend_object</span>(<span class="ruby-constant">Hen</span>.<span class="ruby-identifier">config</span>.<span class="ruby-identifier">dup</span>) {
    <span class="ruby-comment"># Always return a duplicate for a value,</span>
    <span class="ruby-comment"># hence making the configuration immutable</span>
    <span class="ruby-keyword">def</span> <span class="ruby-operator">[]</span>(<span class="ruby-identifier">key</span>)  <span class="ruby-comment"># :nodoc:</span>
      <span class="ruby-identifier">fetch</span>(<span class="ruby-identifier">key</span>).<span class="ruby-identifier">dup</span>
    <span class="ruby-keyword">rescue</span> <span class="ruby-constant">IndexError</span>
      {}
    <span class="ruby-keyword">end</span>
  }
<span class="ruby-keyword">end</span></pre>
          </div><!-- config-source -->
          
        </div>

        

        
      </div><!-- config-method -->

    
      <div id="method-i-execute" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">execute</span><span
            class="method-args">(*commands)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Find a command that is executable and run it. Intended for
platform-dependent alternatives (Command A is not available? Then try B
instead).</p>
          
          

          
          <div class="method-source-code" id="execute-source">
            <pre><span class="ruby-comment"># File lib/hen/dsl.rb, line 79</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">execute</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">commands</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">command</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">which_command</span>(<span class="ruby-identifier">commands</span>)
    <span class="ruby-identifier">sh</span>(<span class="ruby-identifier">command</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">ok</span>, <span class="ruby-identifier">res</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;Error while executing command: #{command} &quot;</span> <span class="ruby-operator">&lt;&lt;</span>
           <span class="ruby-node">&quot;(return code #{res.exitstatus})&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">ok</span>
    }
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;Command not found: #{commands.join(&#39;; &#39;)}&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- execute-source -->
          
        </div>

        

        
      </div><!-- execute-method -->

    
      <div id="method-i-gemcutter" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">gemcutter</span><span
            class="method-args">(&block)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>DEPRECATED: Use <a href="DSL.html#method-i-rubygems">rubygems</a> instead.</p>
          
          

          
          <div class="method-source-code" id="gemcutter-source">
            <pre><span class="ruby-comment"># File lib/hen/dsl.rb, line 178</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">gemcutter</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;#{self}#gemcutter is deprecated; use `rubygems&#39; instead.&quot;</span>
  <span class="ruby-identifier">rubygems</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- gemcutter-source -->
          
        </div>

        

        
      </div><!-- gemcutter-method -->

    
      <div id="method-i-git" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">git</span><span
            class="method-args">() { |init_git| ... }</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Encapsulates tasks targeting at Git, skipping those if the current project
is not controlled by Git. Yields a Git object via <a
href="DSL.html#method-i-init_git">init_git</a>.</p>
          
          

          
          <div class="method-source-code" id="git-source">
            <pre><span class="ruby-comment"># File lib/hen/dsl.rb, line 185</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">git</span>
  <span class="ruby-identifier">have_git?</span> <span class="ruby-operator">?</span> <span class="ruby-keyword">yield</span>(<span class="ruby-identifier">init_git</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">skipping</span>(<span class="ruby-string">&#39;Git&#39;</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- git-source -->
          
        </div>

        

        
      </div><!-- git-method -->

    
      <div id="method-i-have_task-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">have_task?</span><span
            class="method-args">(t)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Return true if task <code>t</code> is defined, false otherwise.</p>
          
          

          
          <div class="method-source-code" id="have_task-3F-source">
            <pre><span class="ruby-comment"># File lib/hen/dsl.rb, line 72</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">have_task?</span>(<span class="ruby-identifier">t</span>)
  <span class="ruby-constant">Rake</span>.<span class="ruby-identifier">application</span>.<span class="ruby-identifier">instance_variable_get</span>(<span class="ruby-value">:@tasks</span>).<span class="ruby-identifier">key?</span>(<span class="ruby-identifier">t</span>.<span class="ruby-identifier">to_s</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- have_task-3F-source -->
          
        </div>

        

        
      </div><!-- have_task-3F-method -->

    
      <div id="method-i-mangle_files-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">mangle_files!</span><span
            class="method-args">(*args)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Clean up the file lists in <code>args</code> by removing duplicates and
either deleting any files that are not managed by the source code
management system (untracked files) or, if the project is not
version-controlled or the SCM is not recognized, deleting any files that
don&#39;t exist.</p>

<p>The return value indicates whether source control is in effect.</p>

<p>Currently supported SCM&#39;s (in that order): <a
href="http://git-scm.com">Git</a>, <a
href="http://subversion.tigris.org">SVN</a>.</p>
          
          

          
          <div class="method-source-code" id="mangle_files-21-source">
            <pre><span class="ruby-comment"># File lib/hen/dsl.rb, line 99</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">mangle_files!</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
  <span class="ruby-identifier">options</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">pop</span> <span class="ruby-operator">:</span> {}

  <span class="ruby-identifier">managed_files</span> = [<span class="ruby-value">:git</span>, <span class="ruby-value">:svn</span>].<span class="ruby-identifier">find</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">scm</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">res</span> = <span class="ruby-identifier">send</span>(<span class="ruby-identifier">scm</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">scm_obj</span><span class="ruby-operator">|</span> <span class="ruby-identifier">scm_obj</span>.<span class="ruby-identifier">managed_files</span> }
    <span class="ruby-keyword">break</span> <span class="ruby-identifier">res</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">res</span>
  } <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">options</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-value">:managed</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:managed</span>]

  <span class="ruby-identifier">args</span>.<span class="ruby-identifier">compact</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">files</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">files</span>.<span class="ruby-identifier">uniq!</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">managed_files</span>
      <span class="ruby-identifier">files</span>.<span class="ruby-identifier">replace</span>(<span class="ruby-identifier">files</span> <span class="ruby-operator">&amp;</span> <span class="ruby-identifier">managed_files</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">files</span>.<span class="ruby-identifier">delete_if</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span> <span class="ruby-operator">!</span><span class="ruby-constant">File</span>.<span class="ruby-identifier">readable?</span>(<span class="ruby-identifier">file</span>) }
    <span class="ruby-keyword">end</span>
  }

  <span class="ruby-operator">!</span><span class="ruby-operator">!</span><span class="ruby-identifier">managed_files</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- mangle_files-21-source -->
          
        </div>

        

        
      </div><!-- mangle_files-21-method -->

    
      <div id="method-i-map_options" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">map_options</span><span
            class="method-args">(options)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Map <code>options</code> hash to array of command line arguments.</p>
          
          

          
          <div class="method-source-code" id="map_options-source">
            <pre><span class="ruby-comment"># File lib/hen/dsl.rb, line 134</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">map_options</span>(<span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">options</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">option</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">option</span> = <span class="ruby-string">&#39;--&#39;</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">option</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">tr</span>(<span class="ruby-string">&#39;_&#39;</span>, <span class="ruby-string">&#39;-&#39;</span>)

    <span class="ruby-keyword">case</span> <span class="ruby-identifier">value</span>
      <span class="ruby-keyword">when</span> <span class="ruby-constant">Array</span>  <span class="ruby-keyword">then</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">_value</span><span class="ruby-operator">|</span> [<span class="ruby-identifier">option</span>, <span class="ruby-identifier">_value</span>] }
      <span class="ruby-keyword">when</span> <span class="ruby-constant">String</span> <span class="ruby-keyword">then</span> [<span class="ruby-identifier">option</span>, <span class="ruby-identifier">value</span>]
      <span class="ruby-keyword">else</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">option</span> <span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
  }.<span class="ruby-identifier">compact</span>.<span class="ruby-identifier">flatten</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- map_options-source -->
          
        </div>

        

        
      </div><!-- map_options-method -->

    
      <div id="method-i-project_name" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">project_name</span><span
            class="method-args">(rf_config = {}, gem_config = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Determine the project name from <code>gem_config</code>&#39;s
<code>:name</code>, or <code>rf_config</code>&#39;s <code>:package</code>
or <code>:project</code>.</p>
          
          

          
          <div class="method-source-code" id="project_name-source">
            <pre><span class="ruby-comment"># File lib/hen/dsl.rb, line 60</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">project_name</span>(<span class="ruby-identifier">rf_config</span> = {}, <span class="ruby-identifier">gem_config</span> = {})
  <span class="ruby-identifier">gem_config</span>[<span class="ruby-value">:name</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">rf_config</span>[<span class="ruby-value">:package</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">rf_config</span>[<span class="ruby-value">:project</span>]
<span class="ruby-keyword">end</span></pre>
          </div><!-- project_name-source -->
          
        </div>

        

        
      </div><!-- project_name-method -->

    
      <div id="method-i-rubyforge" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">rubyforge</span><span
            class="method-args">(&block)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Encapsulates tasks targeting at RubyForge, skipping those if no RubyForge
project is defined. Yields the RubyForge configuration hash and,
optionally, a proc to obtain RubyForge objects from (via <code>call</code>;
reaching out to <a
href="DSL.html#method-i-init_rubyforge">init_rubyforge</a>).</p>
          
          

          
          <div class="method-source-code" id="rubyforge-source">
            <pre><span class="ruby-comment"># File lib/hen/dsl.rb, line 150</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">rubyforge</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-identifier">rf_config</span>  = <span class="ruby-identifier">config</span>[<span class="ruby-value">:rubyforge</span>]
  <span class="ruby-identifier">rf_project</span> = <span class="ruby-identifier">rf_config</span>[<span class="ruby-value">:project</span>]

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">rf_project</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">rf_project</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">have_rubyforge?</span>
    <span class="ruby-identifier">rf_config</span>[<span class="ruby-value">:package</span>] <span class="ruby-operator">||=</span> <span class="ruby-identifier">rf_project</span>

    <span class="ruby-identifier">call_block</span>(<span class="ruby-identifier">block</span>, <span class="ruby-identifier">rf_config</span>) { <span class="ruby-operator">|</span><span class="ruby-operator">*</span><span class="ruby-identifier">args</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">init_rubyforge</span>(<span class="ruby-identifier">args</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">first</span>)
    }
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">skipping</span> <span class="ruby-string">&#39;RubyForge&#39;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- rubyforge-source -->
          
        </div>

        

        
      </div><!-- rubyforge-method -->

    
      <div id="method-i-rubygems" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">rubygems</span><span
            class="method-args">(&block)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Encapsulates tasks targeting at RubyGems.org, skipping those if
RubyGem&#39;s &#39;push&#39; command is not available. Yields an optional
proc to obtain RubyGems (pseudo-)objects from (via <code>call</code>;
reaching out to <a
href="DSL.html#method-i-init_rubygems">init_rubygems</a>).</p>
          
          

          
          <div class="method-source-code" id="rubygems-source">
            <pre><span class="ruby-comment"># File lib/hen/dsl.rb, line 169</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">rubygems</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">have_rubygems?</span>
    <span class="ruby-identifier">call_block</span>(<span class="ruby-identifier">block</span>) { <span class="ruby-operator">|</span><span class="ruby-operator">*</span><span class="ruby-identifier">args</span><span class="ruby-operator">|</span> <span class="ruby-identifier">init_rubygems</span> }
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">skipping</span> <span class="ruby-string">&#39;RubyGems&#39;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- rubygems-source -->
          
        </div>

        

        
      </div><!-- rubygems-method -->

    
      <div id="method-i-set_options" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">set_options</span><span
            class="method-args">(object, options, type = object.class)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Set <code>options</code> on <code>object</code> by calling the
corresponding setter method for each option; warns about illegal options.
Optionally, use <code>type</code> to describe <code>object</code> (defaults
to its class).</p>
          
          

          
          <div class="method-source-code" id="set_options-source">
            <pre><span class="ruby-comment"># File lib/hen/dsl.rb, line 123</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">set_options</span>(<span class="ruby-identifier">object</span>, <span class="ruby-identifier">options</span>, <span class="ruby-identifier">type</span> = <span class="ruby-identifier">object</span>.<span class="ruby-identifier">class</span>)
  <span class="ruby-identifier">options</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">option</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">object</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">setter</span> = <span class="ruby-node">&quot;#{option}=&quot;</span>)
      <span class="ruby-identifier">object</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">setter</span>, <span class="ruby-identifier">value</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;Unknown #{type} option: #{option}&quot;</span>
    <span class="ruby-keyword">end</span>
  }
<span class="ruby-keyword">end</span></pre>
          </div><!-- set_options-source -->
          
        </div>

        

        
      </div><!-- set_options-method -->

    
      <div id="method-i-svn" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">svn</span><span
            class="method-args">() { |init_svn| ... }</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Encapsulates tasks targeting at SVN, skipping those if the current project
is not controlled by SVN. Yields an SVN object via <a
href="DSL.html#method-i-init_svn">init_svn</a>.</p>
          
          

          
          <div class="method-source-code" id="svn-source">
            <pre><span class="ruby-comment"># File lib/hen/dsl.rb, line 191</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">svn</span>
  <span class="ruby-identifier">have_svn?</span> <span class="ruby-operator">?</span> <span class="ruby-keyword">yield</span>(<span class="ruby-identifier">init_svn</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">skipping</span>(<span class="ruby-string">&#39;SVN&#39;</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- svn-source -->
          
        </div>

        

        
      </div><!-- svn-method -->

    
      <div id="method-i-task-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">task!</span><span
            class="method-args">(t, *args, &block)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Define task <code>t</code>, but overwrite any existing task of that name!
(Rake usually just adds them up.)</p>
          
          

          
          <div class="method-source-code" id="task-21-source">
            <pre><span class="ruby-comment"># File lib/hen/dsl.rb, line 66</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">task!</span>(<span class="ruby-identifier">t</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-constant">Rake</span>.<span class="ruby-identifier">application</span>.<span class="ruby-identifier">instance_variable_get</span>(<span class="ruby-value">:@tasks</span>).<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">t</span>.<span class="ruby-identifier">to_s</span>)
  <span class="ruby-identifier">task</span>(<span class="ruby-identifier">t</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- task-21-source -->
          
        </div>

        

        
      </div><!-- task-21-method -->

    
    </section><!-- public-instance-method-details -->
  
     <section id="private-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Private Instance Methods</h3>

    
      <div id="method-i-call_block" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">call_block</span><span
            class="method-args">(block, *args, &block2)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Calls block <code>block</code> with <code>args</code>, appending an
optional passed block if requested by <code>block</code>.</p>
          
          

          
          <div class="method-source-code" id="call_block-source">
            <pre><span class="ruby-comment"># File lib/hen/dsl.rb, line 381</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">call_block</span>(<span class="ruby-identifier">block</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block2</span>)
  <span class="ruby-identifier">args</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">block2</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">block</span>.<span class="ruby-identifier">arity</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">block</span>[<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>]
<span class="ruby-keyword">end</span></pre>
          </div><!-- call_block-source -->
          
        </div>

        

        
      </div><!-- call_block-method -->

    
      <div id="method-i-extend_object" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">extend_object</span><span
            class="method-args">(object, *blocks, &block2)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Extend <code>object</code> with given <code>blocks</code>.</p>
          
          

          
          <div class="method-source-code" id="extend_object-source">
            <pre><span class="ruby-comment"># File lib/hen/dsl.rb, line 360</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">extend_object</span>(<span class="ruby-identifier">object</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">blocks</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block2</span>)
  <span class="ruby-identifier">singleton_class</span> = <span class="ruby-identifier">object</span>.<span class="ruby-identifier">singleton_class</span>

  <span class="ruby-identifier">blocks</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">block2</span>).<span class="ruby-identifier">compact</span>.<span class="ruby-identifier">reverse_each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">block</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">singleton_class</span>.<span class="ruby-identifier">class_eval</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  }

  <span class="ruby-identifier">object</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- extend_object-source -->
          
        </div>

        

        
      </div><!-- extend_object-method -->

    
      <div id="method-i-have_git-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">have_git?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Checks whether the current project is managed by Git.</p>
          
          

          
          <div class="method-source-code" id="have_git-3F-source">
            <pre><span class="ruby-comment"># File lib/hen/dsl.rb, line 236</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">have_git?</span>
  <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-string">&#39;.git&#39;</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- have_git-3F-source -->
          
        </div>

        

        
      </div><!-- have_git-3F-method -->

    
      <div id="method-i-have_rubyforge-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">have_rubyforge?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Loads the RubyForge library, giving a nicer error message if it&#39;s not
found.</p>
          
          

          
          <div class="method-source-code" id="have_rubyforge-3F-source">
            <pre><span class="ruby-comment"># File lib/hen/dsl.rb, line 211</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">have_rubyforge?</span>
  <span class="ruby-identifier">require</span> <span class="ruby-string">&#39;rubyforge&#39;</span>
  <span class="ruby-keyword">true</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">LoadError</span>
  <span class="ruby-identifier">missing_lib</span> <span class="ruby-string">&#39;rubyforge&#39;</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- have_rubyforge-3F-source -->
          
        </div>

        

        
      </div><!-- have_rubyforge-3F-method -->

    
      <div id="method-i-have_rubygems-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">have_rubygems?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Loads the RubyGems <code>push</code> command, giving a nicer error message
if it&#39;s not found.</p>
          
          

          
          <div class="method-source-code" id="have_rubygems-3F-source">
            <pre><span class="ruby-comment"># File lib/hen/dsl.rb, line 220</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">have_rubygems?</span>
  <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">require</span> <span class="ruby-string">&#39;rubygems/command_manager&#39;</span>
    <span class="ruby-identifier">require</span> <span class="ruby-string">&#39;rubygems/commands/push_command&#39;</span>
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">LoadError</span>
    <span class="ruby-comment"># rubygems &lt; 1.3.6, gemcutter &lt; 0.4.0</span>
    <span class="ruby-identifier">require</span> <span class="ruby-string">&#39;commands/abstract_command&#39;</span>
    <span class="ruby-identifier">require</span> <span class="ruby-string">&#39;commands/push&#39;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Commands</span><span class="ruby-operator">::</span><span class="ruby-constant">PushCommand</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">LoadError</span>, <span class="ruby-constant">NameError</span>
  <span class="ruby-identifier">missing_lib</span> <span class="ruby-string">&#39;rubygems (gemcutter)&#39;</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- have_rubygems-3F-source -->
          
        </div>

        

        
      </div><!-- have_rubygems-3F-method -->

    
      <div id="method-i-have_svn-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">have_svn?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Checks whether the current project is managed by SVN.</p>
          
          

          
          <div class="method-source-code" id="have_svn-3F-source">
            <pre><span class="ruby-comment"># File lib/hen/dsl.rb, line 241</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">have_svn?</span>
  <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-string">&#39;.svn&#39;</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- have_svn-3F-source -->
          
        </div>

        

        
      </div><!-- have_svn-3F-method -->

    
      <div id="method-i-init_git" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">init_git</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Prepare the use of Git. Returns the Git (pseudo-)object.</p>
          
          

          
          <div class="method-source-code" id="init_git-source">
            <pre><span class="ruby-comment"># File lib/hen/dsl.rb, line 273</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">init_git</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">have_git?</span>

  <span class="ruby-identifier">pseudo_object</span> {
    <span class="ruby-keyword">def</span> <span class="ruby-identifier">method_missing</span>(<span class="ruby-identifier">cmd</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)  <span class="ruby-comment"># :nodoc:</span>
      <span class="ruby-identifier">options</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">pop</span> <span class="ruby-operator">:</span> {}
      <span class="ruby-identifier">options</span>[<span class="ruby-value">:verbose</span>] = <span class="ruby-constant">Hen</span>.<span class="ruby-identifier">verbose</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-value">:verbose</span>)

      <span class="ruby-constant">DSL</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:sh</span>, <span class="ruby-string">&#39;git&#39;</span>, <span class="ruby-identifier">cmd</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">tr</span>(<span class="ruby-string">&#39;_&#39;</span>, <span class="ruby-string">&#39;-&#39;</span>), <span class="ruby-operator">*</span><span class="ruby-identifier">args</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">options</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">def</span> <span class="ruby-identifier">run</span>(<span class="ruby-identifier">cmd</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)  <span class="ruby-comment"># :nodoc:</span>
      <span class="ruby-node">%x{git #{args.unshift(cmd.to_s.tr(&#39;_&#39;, &#39;-&#39;)).join(&#39; &#39;)}}</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">def</span> <span class="ruby-identifier">remote_for_branch</span>(<span class="ruby-identifier">branch</span>, <span class="ruby-identifier">default</span> = <span class="ruby-string">&#39;origin&#39;</span>)  <span class="ruby-comment"># :nodoc:</span>
      <span class="ruby-identifier">remotes</span> = <span class="ruby-identifier">run</span>(<span class="ruby-value">:branch</span>, <span class="ruby-string">&#39;-r&#39;</span>).<span class="ruby-identifier">scan</span>(<span class="ruby-node">%r{(\S+)/#{Regexp.escape(branch)}$}</span>)
      <span class="ruby-identifier">remotes</span>.<span class="ruby-identifier">flatten!</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">env_remote</span> = <span class="ruby-constant">ENV</span>[<span class="ruby-string">&#39;HEN_REMOTE&#39;</span>]
        <span class="ruby-identifier">env_remote</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">remotes</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">env_remote</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">remotes</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">default</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">default</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">remotes</span>.<span class="ruby-identifier">first</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">def</span> <span class="ruby-identifier">url_for_remote</span>(<span class="ruby-identifier">remote</span>)  <span class="ruby-comment"># :nodoc:</span>
      <span class="ruby-identifier">run</span>(<span class="ruby-value">:remote</span>, <span class="ruby-string">&#39;-v&#39;</span>)[<span class="ruby-node">%r{^#{Regexp.escape(remote)}\s+(\S+)}</span>, <span class="ruby-value">1</span>]
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">def</span> <span class="ruby-identifier">find_remote</span>(<span class="ruby-identifier">regexp</span>, <span class="ruby-identifier">default</span> = <span class="ruby-string">&#39;origin&#39;</span>)  <span class="ruby-comment"># :nodoc:</span>
      <span class="ruby-identifier">remotes</span> = <span class="ruby-identifier">run</span>(<span class="ruby-value">:remote</span>, <span class="ruby-string">&#39;-v&#39;</span>).<span class="ruby-identifier">split</span>(<span class="ruby-identifier">$/</span>).<span class="ruby-identifier">grep</span>(<span class="ruby-identifier">regexp</span>)
      <span class="ruby-identifier">remotes</span>.<span class="ruby-identifier">map!</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">split</span>[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">1</span>] }

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">env_remote</span> = <span class="ruby-constant">ENV</span>[<span class="ruby-string">&#39;HEN_REMOTE&#39;</span>]
        <span class="ruby-identifier">remotes</span>.<span class="ruby-identifier">assoc</span>(<span class="ruby-identifier">env_remote</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">remotes</span>.<span class="ruby-identifier">assoc</span>(<span class="ruby-identifier">default</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">remotes</span>.<span class="ruby-identifier">first</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">def</span> <span class="ruby-identifier">easy_clone</span>(<span class="ruby-identifier">url</span>, <span class="ruby-identifier">dir</span> = <span class="ruby-string">&#39;.&#39;</span>, <span class="ruby-identifier">remote</span> = <span class="ruby-string">&#39;origin&#39;</span>)  <span class="ruby-comment"># :nodoc:</span>
      <span class="ruby-identifier">clone</span> <span class="ruby-string">&#39;-n&#39;</span>, <span class="ruby-string">&#39;-o&#39;</span>, <span class="ruby-identifier">remote</span>, <span class="ruby-identifier">url</span>, <span class="ruby-identifier">dir</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">def</span> <span class="ruby-identifier">checkout_remote_branch</span>(<span class="ruby-identifier">remote</span>, <span class="ruby-identifier">branch</span> = <span class="ruby-string">&#39;master&#39;</span>)  <span class="ruby-comment"># :nodoc:</span>
      <span class="ruby-identifier">checkout</span> <span class="ruby-string">&#39;-b&#39;</span>, <span class="ruby-identifier">branch</span>, <span class="ruby-node">&quot;#{remote}/#{branch}&quot;</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">def</span> <span class="ruby-identifier">add_and_commit</span>(<span class="ruby-identifier">msg</span>)  <span class="ruby-comment"># :nodoc:</span>
      <span class="ruby-identifier">add</span> <span class="ruby-string">&#39;.&#39;</span>
      <span class="ruby-identifier">commit</span> <span class="ruby-string">&#39;-m&#39;</span>, <span class="ruby-identifier">msg</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">def</span> <span class="ruby-identifier">managed_files</span>  <span class="ruby-comment"># :nodoc:</span>
      <span class="ruby-identifier">run</span>(<span class="ruby-value">:ls_files</span>).<span class="ruby-identifier">split</span>(<span class="ruby-identifier">$/</span>)
    <span class="ruby-keyword">end</span>
  }
<span class="ruby-keyword">end</span></pre>
          </div><!-- init_git-source -->
          
        </div>

        

        
      </div><!-- init_git-method -->

    
      <div id="method-i-init_rubyforge" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">init_rubyforge</span><span
            class="method-args">(login = true)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Prepare the use of RubyForge, optionally logging in right away. Returns the
RubyForge object.</p>
          
          

          
          <div class="method-source-code" id="init_rubyforge-source">
            <pre><span class="ruby-comment"># File lib/hen/dsl.rb, line 247</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">init_rubyforge</span>(<span class="ruby-identifier">login</span> = <span class="ruby-keyword">true</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">have_rubyforge?</span>

  <span class="ruby-identifier">rf</span> = <span class="ruby-constant">RubyForge</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">configure</span>
  <span class="ruby-identifier">rf</span>.<span class="ruby-identifier">login</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">login</span>

  <span class="ruby-identifier">rf</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- init_rubyforge-source -->
          
        </div>

        

        
      </div><!-- init_rubyforge-method -->

    
      <div id="method-i-init_rubygems" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">init_rubygems</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Prepare the use of RubyGems.org. Returns the RubyGems (pseudo-)object.</p>
          
          

          
          <div class="method-source-code" id="init_rubygems-source">
            <pre><span class="ruby-comment"># File lib/hen/dsl.rb, line 258</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">init_rubygems</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">have_rubygems?</span>

  <span class="ruby-identifier">pseudo_object</span> {
    <span class="ruby-keyword">def</span> <span class="ruby-identifier">method_missing</span>(<span class="ruby-identifier">cmd</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)  <span class="ruby-comment"># :nodoc:</span>
      <span class="ruby-identifier">run</span>(<span class="ruby-identifier">cmd</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">def</span> <span class="ruby-identifier">run</span>(<span class="ruby-identifier">cmd</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)  <span class="ruby-comment"># :nodoc:</span>
      <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">CommandManager</span>.<span class="ruby-identifier">instance</span>.<span class="ruby-identifier">run</span>([<span class="ruby-identifier">cmd</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">tr</span>(<span class="ruby-string">&#39;_&#39;</span>, <span class="ruby-string">&#39;-&#39;</span>), <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>])
    <span class="ruby-keyword">end</span>
  }
<span class="ruby-keyword">end</span></pre>
          </div><!-- init_rubygems-source -->
          
        </div>

        

        
      </div><!-- init_rubygems-method -->

    
      <div id="method-i-init_svn" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">init_svn</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Prepare the use of SVN. Returns the SVN (pseudo-)object.</p>
          
          

          
          <div class="method-source-code" id="init_svn-source">
            <pre><span class="ruby-comment"># File lib/hen/dsl.rb, line 334</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">init_svn</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">have_svn?</span>

  <span class="ruby-identifier">pseudo_object</span> {
    <span class="ruby-keyword">def</span> <span class="ruby-identifier">method_missing</span>(<span class="ruby-identifier">cmd</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)  <span class="ruby-comment"># :nodoc:</span>
      <span class="ruby-identifier">options</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">pop</span> <span class="ruby-operator">:</span> {}
      <span class="ruby-identifier">options</span>[<span class="ruby-value">:verbose</span>] = <span class="ruby-constant">Hen</span>.<span class="ruby-identifier">verbose</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-value">:verbose</span>)

      <span class="ruby-constant">DSL</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:sh</span>, <span class="ruby-string">&#39;svn&#39;</span>, <span class="ruby-identifier">cmd</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">tr</span>(<span class="ruby-string">&#39;_&#39;</span>, <span class="ruby-string">&#39;-&#39;</span>), <span class="ruby-operator">*</span><span class="ruby-identifier">args</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">options</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">def</span> <span class="ruby-identifier">run</span>(<span class="ruby-identifier">cmd</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)  <span class="ruby-comment"># :nodoc:</span>
      <span class="ruby-node">%x{svn #{args.unshift(cmd.to_s.tr(&#39;_&#39;, &#39;-&#39;)).join(&#39; &#39;)}}</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">def</span> <span class="ruby-identifier">version</span>  <span class="ruby-comment"># :nodoc:</span>
      <span class="ruby-value">%x{svnversion}</span>[<span class="ruby-regexp">/\d+/</span>]
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">def</span> <span class="ruby-identifier">managed_files</span>  <span class="ruby-comment"># :nodoc:</span>
      <span class="ruby-identifier">run</span>(<span class="ruby-value">:list</span>, <span class="ruby-string">&#39;--recursive&#39;</span>).<span class="ruby-identifier">split</span>(<span class="ruby-identifier">$/</span>)
    <span class="ruby-keyword">end</span>
  }
<span class="ruby-keyword">end</span></pre>
          </div><!-- init_svn-source -->
          
        </div>

        

        
      </div><!-- init_svn-method -->

    
      <div id="method-i-missing_lib" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">missing_lib</span><span
            class="method-args">(lib, do_warn = $DEBUG)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Warn about missing library <code>lib</code> (if <code>do_warn</code> is
true) and return false.</p>
          
          

          
          <div class="method-source-code" id="missing_lib-source">
            <pre><span class="ruby-comment"># File lib/hen/dsl.rb, line 204</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">missing_lib</span>(<span class="ruby-identifier">lib</span>, <span class="ruby-identifier">do_warn</span> = <span class="ruby-identifier">$DEBUG</span>)
  <span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;Please install the `#{lib}&#39; library for additional tasks.&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">do_warn</span>
  <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- missing_lib-source -->
          
        </div>

        

        
      </div><!-- missing_lib-method -->

    
      <div id="method-i-pseudo_object" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">pseudo_object</span><span
            class="method-args">(&block)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Create a (pseudo-)object.</p>
          
          

          
          <div class="method-source-code" id="pseudo_object-source">
            <pre><span class="ruby-comment"># File lib/hen/dsl.rb, line 371</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">pseudo_object</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-identifier">extend_object</span>(<span class="ruby-constant">Object</span>.<span class="ruby-identifier">new</span>, <span class="ruby-identifier">block</span>) {
    <span class="ruby-identifier">instance_methods</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">method</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">undef_method</span>(<span class="ruby-identifier">method</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">method</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/\A__|\Aobject_id\z/</span>
    }
  }
<span class="ruby-keyword">end</span></pre>
          </div><!-- pseudo_object-source -->
          
        </div>

        

        
      </div><!-- pseudo_object-method -->

    
      <div id="method-i-skipping" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">skipping</span><span
            class="method-args">(name, do_warn = Hen.verbose)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Warn about skipping tasks for <code>name</code> (if <code>do_warn</code> is
true) and return nil.</p>
          
          

          
          <div class="method-source-code" id="skipping-source">
            <pre><span class="ruby-comment"># File lib/hen/dsl.rb, line 198</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">skipping</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">do_warn</span> = <span class="ruby-constant">Hen</span>.<span class="ruby-identifier">verbose</span>)
  <span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;Skipping #{name} tasks.&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">do_warn</span>
  <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- skipping-source -->
          
        </div>

        

        
      </div><!-- skipping-method -->

    
    </section><!-- private-instance-method-details -->
  
  </section><!-- 5Buntitled-5D -->

</div><!-- documentation -->


<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 4.0.1.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

